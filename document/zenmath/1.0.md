## 用語

### コマンド
ZenMath の各要素のことです。
これを単に「要素」と言ってしまうと、ZenMath 記法での要素と Zotica のカスタム要素の区別が曖昧になってしまうため、前者は「コマンド」と読んで区別します。

### 定義ファイル
コマンド名と記号の対応などが定義されているファイルです。
[ここ](../../source/zenmath/resource/math.json)に置いてあります。

## プレーンテキストのパース
ZenMath では、テキストノードも内容がパースされ、Zotica の要素に変換されます。
具体的には、以下のような動作をします。

まず、全てのスペースは無視されます。
その上で、数字 (Unicode カテゴリーが Number の文字) の列は、まとめて 1 つの `math-n` 要素に変換されます。
アルファベット (Unicode カテゴリーが Letter か Mark の文字) は、1 文字ずつがそれぞれ 1 つの `math-i` 要素に変換されます。
それ以外の文字は、1 文字ずつがそれぞれ 1 つの `math-o` 要素に変換されます。

さらに、ハイフン (U+002D) とアスタリスク (U+002A) は、それぞれマイナス記号 (U+2212) とアスタリスク演算子 (U+2217) に置き換えられます。

テキストが `math-o` 要素に変換される場合に限り、ZenMath が同じ記号を出力するコマンドを提供している場合、そのコマンドを用いた場合に付けられる共通クラスが付けられます。
同じ記号を出力するコマンドが存在しない場合は、`bin` クラスが付けられます。

`n`, `i`, `op`, `o`, `bf`, `rm`, `bfrm`, `text`, `bb`, `cal`, `scr`, `frak` の 12 種類のコマンドでは、ここでのテキストノードのパースは行われず、テキストはそのまま保持されます。
このようなコマンドは、[定義ファイル](../../source/zenmath/resource/math.json) の `leaf` キーで一覧できます。

## 共通クラス
仕様策定中です。

## ギリシャ文字エスケープ
`` ` ``に続いてラテン文字を置くと、対応するギリシャ文字に変換されます。
ラテン文字とギリシャ文字の対応は、[定義ファイル](../../source/zenmath/resource/math.json) の `greek` キーを参照してください。

## 要素

### 数値 (`n`)
```
\n< #<数値># >
```
```html
<math-n> <!-- 数値 --> </math-n>
```
数値を記述します。
テキスト内の数字列は自動的に `math-n` 要素に変換されるので、基本的にはこのコマンドを使う必要はありません。
ただし、特定の数字列に何らかの共通クラスを付けたい場合には利用できるかもしれません。

### 識別子 (`i`)

### フォント指定した識別子 (`bf`, `rm`, `bfrm`)

### 関数 (`op`)

### 記号 (`o`)
